{% extends 'base.html' %} 
{% load static %} 

{% block title %} Search Blog {% endblock %}

{% block content %}
<div
  class="min-h-[calc(100vh-theme(spacing.header))] pb-[100px] bg-my-black-300 text-white"
>
  <div class="max-w-7xl px-5 pt-[50px] mx-auto flex flex-col gap-y-16">
    <div class="mx-auto flex items-center">
      <!-- Search -->
      <form
        action="/blogs/search"
        method="get"
        class="flex-col sm:flex-row flex gap-3 items-center"
        novalidate
      >
        <div
          class="w-64 sm:w-96 pl-4 flex border border-gray-600 bg-zinc-900 rounded-md outline-none focus-within:border-blue-500"
        >
          <div class="flex items-center justify-center">
            <i class="text-gray-300 fa-solid fa-magnifying-glass fa-md"></i>
          </div>
          <input
            class="w-full p-3 bg-transparent placeholder-zinc-500 text-white outline-none rounded-r-md"
            name="query"
            placeholder="Search blog"
          />
        </div>
        <div class="flex gap-3">
          <button type="reset" class="px-3 py-2 border border-white rounded-md">
            Clear
          </button>
          <button
            type="submit"
            class="px-3 py-2 bg-mono-neon-purple rounded-md"
          >
            Search
          </button>
        </div>
      </form>
    </div>

    <div class="flex flex-col gap-y-5 items-center">
      {% if not blogs %}
      <h1 class="text-3xl">No blogs found.</h1>
      {% else %}
      <h1 class="text-3xl">Search Results</h1>
      {% for blog in blogs %}
      <ul class="pt-5 flex flex-col gap-y-5 items-center">
        <li>
          <article class="max-w-4xl">
            <div
              class="relative group group-focus-within:ring-2 ring-white ring-offset-1 ring-offset-black rounded-md"
            >
              <a class="absolute inset-0" href="/blogs/{{ blog.id }}"></a>
              <div class="flex flex-col sm:flex-row gap-x-5">
                <span class="sr-only">Read more about {{ blog.title }}</span>
                <img
                  src="{% static 'imgs/placeholder.jpg' %}"
                  class="object-cover max-h-[250px] sm:max-h-none w-full sm:w-[300px] rounded-md"
                />

                <!-- Tag -->
                <p
                  class="absolute top-2 left-2 px-4 py-2 rounded-3xl bg-zinc-700/60 text-white"
                >
                  {{ blog.tag|capfirst }}
                </p>

                <div class="flex flex-col gap-y-3">
                  <!-- Date of creation -->
                  <p class="mt-2 text-gray-400 flex gap-x-3 items-center">
                    <span>{{ blog.date_created|date:"F j, Y" }}</span>
                    <span class="ml-auto">10 mins read</span>
                  </p>

                  <!-- Blog content -->
                  <div class="flex flex-col gap-y-2">
                    <h3
                      class="text-2xl text-white line-clamp-2 sm:line-clamp-3"
                    >
                      {{ blog.title }}
                    </h3>

                    <!-- Blog description -->
                    <p class="text-gray-400 line-clamp-2 sm:line-clamp-3">
                      {{ blog.description }}
                    </p>
                  </div>

                  <!-- Author -->
                  <a href="/user" class="z-10">
                    <div class="flex gap-x-3 items-center">
                      <img
                        src="{% static 'imgs/cat.jpg' %}"
                        class="w-[40px] h-[40px] object-cover rounded-full"
                      />
                      <p class="text-white">
                        {{ blog.author.first_name }} {{ blog.author.last_name }}
                      </p>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </article>
        </li>
      </ul>
      {% endfor %} {% endif %}
    </div>
  </div>
</div>
{% endblock %}
