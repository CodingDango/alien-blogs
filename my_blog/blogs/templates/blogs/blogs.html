{% extends 'base.html' %}
{% load static %}

{% block title %}
  Blog List - Alien Blog
{% endblock %}

{% block link %}
  <script src="{% static 'js/blog.js' %}"></script>
{% endblock %}

{% block content %}
  <div class="min-h-[calc(100vh-theme(spacing.header))] pb-[100px] bg-my-black-300">
    <div class="w-full mx-auto flex flex-col items-center gap-y-10"> 
      <!-- Featured Blog -->
      <div class="w-full flex justify-center max-w-7xl">
        
          <div class="grid w-full min-h-[500px] max-h-[600px] grid-cols-1 grid-rows-1">
            <a href="/blogs/{{ featuredBlog.id }}" class="col-start-1 row-start-1 h-full w-full z-10"></a>

            <!-- Big boi picture -->
            <div class="col-start-1 row-start-1 grid">
              <img 
                src="{% static 'imgs/cat.jpg' %}" 
                class="col-start-1 row-start-1 w-full min-h-[500px] max-h-[600px] object-cover rounded-b-md"
              >
              <div 
                class="col-start-1 row-start-1 w-full h-full bg-black/30"
              ></div>
            </div>

            <div class="col-start-1 row-start-1 w-full h-full flex items-end px-5 py-10">
              <div class="flex justify-between items-center w-full">
                <div class="max-w-sm">
                  <div class="w-min">
                    <p 
                      class="px-4 py-2 rounded-3xl bg-zinc-700/60 text-white"
                    >{{ featuredBlog.tag|capfirst }}</p>
                  </div>
                  
                  <h2 class="mt-3 text-4xl text-white line-clamp-2">{{ featuredBlog.title|capfirst }}</h2>
                  <p class="text-gray-300 mt-3 line-clamp-2">{{ featuredBlog.description }}</p>
                </div>

                <!-- Author -->
                <a href="#" class="z-20">
                  <div class="flex flex-col gap-y-2 justify-end">
                    <div class="flex gap-x-3 items-center">
                      <img 
                        src="{% static 'imgs/placeholder.jpg' %}"
                        class="w-[40px] h-[40px] rounded-full object-cover"  
                      >
                      <p class="text-white text-lg">{{ featuredBlog.author.first_name }} {{ featuredBlog.author.last_name }}</p>
                    </div>
                    <p class="ml-auto text-gray-300 flex gap-x-3 items-center">
                      <span>{{ featuredBlog.date_created|date:"j F, Y" }}</span>
                      <span class="text-xl">â€¢</span>
                      <span>10 mins read</span>
                    </p>
                  </div>
                </a>
              </div>
            </div>
          </div>
      </div>

    <!-- Blog List --> 
    <div class="max-w-7xl px-5 w-full">
      
      <!-- Blog header -->
      <div>
        <h2 class="text-4xl text-white">Blog</h2>
        <p class="text-gray-400 mt-3">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Accusantium ullam sint debitis sequi.</p>
      </div>

      <!-- Blog controls -->
      <div class="mt-6 w-full flex justify-center md:justify-between items-center text-white gap-y-5 gap-x-5">
        <div class="relative">

          <button 
            id="filter-button"
            class="md:hidden rounded-md flex bg-mono-neon-purple px-5 py-2 gap-3">
            <div class="text-center">Filter Posts</div>
            <div class="flex items-center justify-center pb-1">
              <i class="fa-solid fa-caret-down fa-lg"></i>
            </div>
          </button>

          <div 
            id="filter-dropdown"
            class="mt-2 py-2 hidden rounded-md absolute top-full left-0 z-10 w-full bg-zinc-800"
          >
            <div class="flex flex-col">
              {% for tag in blogTags %}
                  <button class="pl-5 py-2 hover:bg-white/10 flex">
                    <span>{{ tag|capfirst }}</span>
                  </button>
              {% endfor %}
            </div>
          </div>

          <div class="hidden md:flex justify-center gap-x-5">
            <button class="py-2 px-5 bg-white text-black rounded-md">All</button>
            
            {% for tag in blogTags %}
              <button class="py-2 px-5 hover:bg-white/10 rounded-md">{{ tag|capfirst }}</button>
            {% endfor %}
          </div>
        </div>

        <div class="relative gap-x-5 flex items-center">
            <button 
              id="sort-by-button"
              class="py-2 px-5 border border-gray-500 rounded-md flex gap-x-2">
              <span class="text-gray-400">Sort by:</span>
              <span id="sort-by-active">Newest</span>
            </button>
            <div 
              id="sort-by-dropdown"
              class="hidden py-2 mt-2 rounded-md w-full absolute top-full flex flex-col bg-zinc-800 z-10"
            >
              <button class="py-2 pl-5  hover:bg-white/10 flex">
                <span>Newest</span>
              </button>

              <button class="py-2 pl-5 hover:bg-white/10 flex">
                <span>Oldest</span>
              </button>

              <button class="py-2 pl-5 hover:bg-white/10 flex">
                <span>Most Popular</span>
              </button>
            </div>
        </div>
      </div>

      <!-- Blog Grid -->
      <div class="mt-8 grid sm:grid-cols-2 md:grid-cols-3 w-full gap-x-5 gap-y-8">

        {% for blog in blogs %}
          <!-- Blog card -->
          <article>
            <div class="relative group group-focus-within:ring-2 ring-white ring-offset-1 ring-offset-black rounded-md flex flex-col pb-5">
              <a href="/blogs/{{ blog.id }}">
                <span class="sr-only">Read more about {{ blog.title }}</span>

                <div>
                  <img src="{% static 'imgs/placeholder.jpg' %}" class="object-cover min-h-[300px] max-h-[300px] w-full rounded-md">
                </div>

                <!-- Tag -->
                  <p 
                    class="absolute top-2 left-2 px-4 py-2 rounded-3xl bg-zinc-700/60 text-white"
                  >{{ blog.tag|capfirst }}</p>

                <div class="flex flex-col gap-y-3">
                  <!-- Date of creation -->
                  <p class="mt-2 text-gray-400 flex gap-x-3 items-center">
                    <span>{{ blog.date_created|date:"j F, Y" }}</span>
                    <span class="ml-auto">10 mins read</span>
                  </p>

                  <!-- Blog content -->
                  <div class="flex flex-col gap-y-2">
                    <h3 
                      class="text-2xl text-white line-clamp-2"
                    >{{ blog.title }}</h3>
                    
                    <!-- Blog description -->
                    <p class="text-gray-400 line-clamp-2">{{ blog.description }}</p>
                  </div>
                </div>
              </a>
            </div>

            <!-- Author --> 
            <a href="/user" class="z-10">
              <div class="flex gap-x-3 items-center">
                <img 
                  src="{% static 'imgs/cat.jpg' %}"
                  class="w-[40px] h-[40px] object-cover rounded-full"
                >
                <p class="text-white">{{ blog.author.first_name }} {{ blog.author.last_name }}</p>
              </div>
            </a>
          </article>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}